"use server";

import UserDropdown from "./user-dropdown";
import { fetchUser } from "@/app/actions/fetchUser";
import type { User } from "@/lib/user";

export async function Navbar() {
  const user: User | null = await fetchUser();
  return (
    <header className="z-50 flex flex-wrap md:justify-start md:flex-nowrap w-full text-sm bg-white fixed backdrop-blur border-b h-16">
      <nav className="max-w-[1110px] flex flex-wrap basis-full items-center w-full mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center sm:gap-x-2 lg:gap-x-0 xl:gap-x-3">
          <a className="flex-none rounded-md focus:outline-none focus:opacity-80">
            <svg
              className="h-8 w-auto"
              width="1577"
              height="272"
              viewBox="0 0 1577 272"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M136 190C83.6162 190 41 147.385 41 95C41 42.6166 83.6145 0 136 0C188.385 0 231 42.6166 231 95C231 147.385 188.383 190 136 190ZM136 20.0869C94.6907 20.0869 61.0889 53.6929 61.0889 95.0025C61.0889 136.311 94.6932 169.917 136 169.917C177.307 169.917 210.915 136.309 210.915 95.0025C210.915 53.6949 177.309 20.0869 136 20.0869Z"
                fill="#0066CC"
              />
              <path
                d="M155.829 119.784C155.829 119.784 152.049 130.218 136.92 130.218H123.917V74.0431C123.917 69.6542 127.701 65.522 132.021 65.522H132.134V53H93.1048V65.522H93C97.322 65.522 101.321 69.6542 101.321 74.0431V121.721C101.321 126.112 97.322 130.217 93 130.217H93.1048V149H165V119.782L155.829 119.784Z"
                fill="#0066CC"
              />
              <path
                d="M145.685 35C134.191 35 123.573 38.7032 115 44.8992H140.499V71.1704C134.31 72.1309 132.247 76.3152 132.247 81.3319V121.317H139.472C146.143 121.317 151.511 117.187 151.865 110.99H173.504V130C187.944 120.77 197 104.78 197 86.7409C197 58.231 174.16 35 145.685 35Z"
                fill="#ED8B18"
              />
              <path
                d="M323 206.023V67.6512H350.107L400.561 149.686L382.754 149.488L433.802 67.6512H459.722V206.023H430.636V158.581C430.636 146.721 430.9 136.047 431.428 126.558C432.087 117.07 433.142 107.647 434.593 98.2907L438.155 107.581L397.593 170.442H384.535L344.765 107.977L348.128 98.2907C349.579 107.12 350.569 116.213 351.096 125.57C351.756 134.795 352.086 145.798 352.086 158.581V206.023H323ZM495.742 206.023V67.6512H589.33V93.7442H524.629V179.93H590.715V206.023H495.742ZM509.592 148.105V122.802H579.832V148.105H509.592ZM666.251 208C657.677 208 649.829 206.946 642.706 204.837C635.715 202.729 629.449 199.632 623.909 195.547C618.501 191.461 613.62 186.519 609.267 180.721L627.866 159.57C634.33 168.531 640.727 174.659 647.059 177.953C653.522 181.116 660.513 182.698 668.032 182.698C672.121 182.698 675.749 182.171 678.914 181.116C682.212 179.93 684.784 178.283 686.631 176.174C688.478 174.066 689.401 171.562 689.401 168.663C689.401 166.554 688.939 164.643 688.016 162.93C687.093 161.085 685.774 159.504 684.059 158.186C682.344 156.736 680.299 155.484 677.925 154.43C675.551 153.244 672.913 152.256 670.011 151.465C667.109 150.543 663.943 149.818 660.513 149.291C653.126 147.578 646.663 145.535 641.123 143.163C635.583 140.659 630.966 137.628 627.273 134.07C623.579 130.38 620.809 126.229 618.963 121.616C617.248 117.004 616.39 111.798 616.39 106C616.39 100.07 617.709 94.6008 620.348 89.593C622.986 84.4535 626.613 80.0388 631.23 76.3488C635.979 72.6589 641.387 69.8256 647.454 67.8488C653.654 65.8721 660.184 64.8837 667.043 64.8837C675.485 64.8837 682.872 65.8721 689.203 67.8488C695.535 69.6938 701.009 72.3953 705.626 75.9535C710.374 79.5116 714.331 83.8605 717.497 89L698.7 107.186C695.93 103.496 692.896 100.399 689.599 97.8953C686.433 95.3915 682.938 93.5465 679.112 92.3605C675.419 91.0426 671.594 90.3837 667.636 90.3837C663.283 90.3837 659.524 90.9767 656.358 92.1628C653.192 93.217 650.686 94.7984 648.84 96.907C647.125 99.0155 646.267 101.585 646.267 104.616C646.267 106.988 646.861 109.097 648.048 110.942C649.235 112.787 650.95 114.434 653.192 115.884C655.435 117.202 658.139 118.388 661.305 119.442C664.471 120.496 667.966 121.419 671.791 122.209C679.046 123.659 685.576 125.57 691.38 127.942C697.184 130.314 702.13 133.213 706.219 136.64C710.44 139.934 713.672 143.888 715.914 148.5C718.157 152.981 719.278 158.054 719.278 163.721C719.278 173.078 717.036 181.05 712.551 187.64C708.066 194.229 701.866 199.302 693.952 202.86C686.037 206.287 676.804 208 666.251 208ZM806.902 208C796.745 208 787.38 206.287 778.806 202.86C770.364 199.302 762.977 194.36 756.646 188.035C750.446 181.578 745.631 174 742.202 165.302C738.772 156.473 737.057 146.853 737.057 136.442C737.057 126.295 738.838 116.938 742.4 108.372C745.961 99.6744 750.974 92.1628 757.437 85.8372C763.9 79.3798 771.485 74.3721 780.191 70.8139C788.897 67.2558 798.328 65.4767 808.485 65.4767C815.08 65.4767 821.544 66.3992 827.875 68.2442C834.338 69.9574 840.208 72.5271 845.484 75.9535C850.892 79.3798 855.509 83.4651 859.334 88.2093L840.736 108.767C837.57 105.605 834.272 102.903 830.843 100.663C827.545 98.2907 823.984 96.5116 820.159 95.3256C816.465 94.0078 812.508 93.3488 808.287 93.3488C802.615 93.3488 797.273 94.4031 792.261 96.5116C787.38 98.6202 783.093 101.585 779.4 105.407C775.706 109.097 772.738 113.643 770.496 119.047C768.385 124.318 767.33 130.182 767.33 136.64C767.33 143.229 768.385 149.225 770.496 154.628C772.606 159.899 775.574 164.446 779.4 168.267C783.225 171.957 787.776 174.857 793.052 176.965C798.46 178.942 804.396 179.93 810.859 179.93C815.08 179.93 819.17 179.337 823.127 178.151C827.083 176.965 830.711 175.318 834.008 173.209C837.438 171.101 840.472 168.663 843.11 165.895L857.554 189.023C854.388 192.581 850.101 195.81 844.693 198.709C839.417 201.609 833.481 203.915 826.885 205.628C820.291 207.209 813.629 208 806.902 208ZM943.912 208C933.755 208 924.389 206.221 915.815 202.663C907.242 199.105 899.723 194.163 893.259 187.837C886.928 181.38 882.047 173.802 878.618 165.105C875.188 156.275 873.473 146.721 873.473 136.442C873.473 126.031 875.188 116.543 878.618 107.977C882.047 99.2791 886.928 91.7016 893.259 85.2442C899.723 78.7868 907.242 73.7791 915.815 70.2209C924.389 66.6628 933.755 64.8837 943.912 64.8837C954.2 64.8837 963.566 66.6628 972.008 70.2209C980.582 73.7791 988.035 78.7868 994.366 85.2442C1000.83 91.7016 1005.78 99.2791 1009.21 107.977C1012.64 116.674 1014.35 126.163 1014.35 136.442C1014.35 146.721 1012.64 156.209 1009.21 164.907C1005.78 173.605 1000.83 181.182 994.366 187.64C988.035 194.097 980.582 199.105 972.008 202.663C963.566 206.221 954.2 208 943.912 208ZM943.912 179.93C949.716 179.93 955.058 178.876 959.938 176.767C964.951 174.659 969.238 171.628 972.799 167.674C976.361 163.721 979.131 159.109 981.11 153.837C983.22 148.566 984.275 142.767 984.275 136.442C984.275 130.116 983.22 124.318 981.11 119.047C979.131 113.775 976.361 109.229 972.799 105.407C969.238 101.453 964.951 98.4225 959.938 96.3139C955.058 94.0736 949.716 92.9535 943.912 92.9535C938.108 92.9535 932.766 94.0736 927.885 96.3139C923.004 98.4225 918.717 101.453 915.024 105.407C911.331 109.229 908.495 113.775 906.516 119.047C904.669 124.318 903.746 130.116 903.746 136.442C903.746 142.767 904.669 148.566 906.516 153.837C908.495 159.109 911.331 163.721 915.024 167.674C918.717 171.628 923.004 174.659 927.885 176.767C932.766 178.876 938.108 179.93 943.912 179.93ZM1041.21 206.023V67.6512H1067.72L1144.3 171.035H1138.76C1138.23 166.95 1137.77 162.996 1137.37 159.174L1136.18 147.314C1135.92 143.229 1135.66 139.078 1135.39 134.86C1135.26 130.512 1135.13 125.965 1135 121.221C1134.86 116.345 1134.8 111.074 1134.8 105.407V67.6512H1163.88V206.023H1136.97L1058.82 101.651L1066.34 101.849C1067 108.702 1067.53 114.566 1067.92 119.442C1068.45 124.186 1068.84 128.337 1069.11 131.895C1069.37 135.453 1069.57 138.55 1069.7 141.186C1069.97 143.822 1070.1 146.326 1070.1 148.698C1070.23 151.07 1070.3 153.574 1070.3 156.209V206.023H1041.21ZM1263.36 208C1252.67 208 1242.85 206.221 1233.88 202.663C1225.04 198.973 1217.39 193.899 1210.92 187.442C1204.46 180.984 1199.45 173.407 1195.89 164.709C1192.46 156.012 1190.74 146.589 1190.74 136.442C1190.74 126.295 1192.52 116.938 1196.09 108.372C1199.78 99.6744 1204.92 92.1628 1211.52 85.8372C1218.25 79.3798 1226.09 74.3721 1235.06 70.8139C1244.03 67.2558 1253.86 65.4767 1264.55 65.4767C1271.93 65.4767 1278.99 66.4651 1285.72 68.4419C1292.44 70.4186 1298.58 73.1202 1304.12 76.5465C1309.66 79.9729 1314.27 83.9264 1317.97 88.407L1299.57 107.779C1296.14 104.484 1292.51 101.717 1288.68 99.4767C1284.99 97.1047 1281.1 95.3256 1277.01 94.1395C1272.92 92.8217 1268.7 92.1628 1264.35 92.1628C1258.15 92.1628 1252.41 93.2829 1247.13 95.5232C1241.99 97.7636 1237.44 100.86 1233.48 104.814C1229.52 108.767 1226.42 113.446 1224.18 118.849C1222.07 124.252 1221.02 130.116 1221.02 136.442C1221.02 142.636 1222.14 148.5 1224.38 154.035C1226.75 159.438 1229.92 164.182 1233.88 168.267C1237.97 172.221 1242.71 175.384 1248.12 177.756C1253.53 179.996 1259.33 181.116 1265.53 181.116C1269.89 181.116 1274.04 180.457 1278 179.14C1281.96 177.822 1285.39 175.977 1288.29 173.605C1291.32 171.101 1293.63 168.202 1295.21 164.907C1296.93 161.612 1297.79 158.12 1297.79 154.43V149.686L1301.74 155.221H1262.17V130.512H1326.28C1326.41 131.961 1326.54 133.74 1326.67 135.849C1326.94 137.957 1327.07 140.066 1327.07 142.174C1327.2 144.151 1327.27 145.733 1327.27 146.919C1327.27 155.88 1325.62 164.116 1322.32 171.628C1319.15 179.14 1314.67 185.597 1308.87 191C1303.19 196.403 1296.47 200.62 1288.68 203.651C1280.9 206.55 1272.46 208 1263.36 208ZM1353.46 206.023V67.6512H1447.05V93.7442H1382.35V179.93H1448.43V206.023H1353.46ZM1367.31 148.105V122.802H1437.55V148.105H1367.31ZM1386.11 57.7674L1379.38 43.7326L1418.95 21L1429.24 42.5465L1386.11 57.7674ZM1523.97 208C1515.4 208 1507.55 206.946 1500.43 204.837C1493.44 202.729 1487.17 199.632 1481.63 195.547C1476.22 191.461 1471.34 186.519 1466.99 180.721L1485.59 159.57C1492.05 168.531 1498.45 174.659 1504.78 177.953C1511.24 181.116 1518.24 182.698 1525.75 182.698C1529.84 182.698 1533.47 182.171 1536.64 181.116C1539.93 179.93 1542.51 178.283 1544.35 176.174C1546.2 174.066 1547.12 171.562 1547.12 168.663C1547.12 166.554 1546.66 164.643 1545.74 162.93C1544.81 161.085 1543.5 159.504 1541.78 158.186C1540.07 156.736 1538.02 155.484 1535.65 154.43C1533.27 153.244 1530.63 152.256 1527.73 151.465C1524.83 150.543 1521.67 149.818 1518.24 149.291C1510.85 147.578 1504.39 145.535 1498.85 143.163C1493.31 140.659 1488.69 137.628 1484.99 134.07C1481.3 130.38 1478.53 126.229 1476.68 121.616C1474.97 117.004 1474.11 111.798 1474.11 106C1474.11 100.07 1475.43 94.6008 1478.07 89.593C1480.71 84.4535 1484.34 80.0388 1488.95 76.3488C1493.7 72.6589 1499.11 69.8256 1505.18 67.8488C1511.38 65.8721 1517.91 64.8837 1524.76 64.8837C1533.21 64.8837 1540.59 65.8721 1546.93 67.8488C1553.26 69.6938 1558.73 72.3953 1563.35 75.9535C1568.1 79.5116 1572.05 83.8605 1575.22 89L1556.42 107.186C1553.65 103.496 1550.62 100.399 1547.32 97.8953C1544.16 95.3915 1540.66 93.5465 1536.83 92.3605C1533.14 91.0426 1529.32 90.3837 1525.36 90.3837C1521.01 90.3837 1517.25 90.9767 1514.08 92.1628C1510.91 93.217 1508.41 94.7984 1506.56 96.907C1504.85 99.0155 1503.99 101.585 1503.99 104.616C1503.99 106.988 1504.58 109.097 1505.77 110.942C1506.96 112.787 1508.67 114.434 1510.91 115.884C1513.16 117.202 1515.86 118.388 1519.03 119.442C1522.19 120.496 1525.69 121.419 1529.51 122.209C1536.77 123.659 1543.3 125.57 1549.1 127.942C1554.91 130.314 1559.85 133.213 1563.94 136.64C1568.16 139.934 1571.39 143.888 1573.64 148.5C1575.88 152.981 1577 158.054 1577 163.721C1577 173.078 1574.76 181.05 1570.27 187.64C1565.79 194.229 1559.59 199.302 1551.67 202.86C1543.76 206.287 1534.53 208 1523.97 208Z"
                fill="#0066CC"
              />
              <path
                d="M143 228H165V250H143V228ZM198.001 228H220V250H198.001V228ZM186.994 183.989V162H164.994V172.711L173.2 184L186.994 183.989Z"
                fill="#ED8B18"
              />
              <path
                d="M237.638 259.086V228.768H242.348L246.725 224.566L194.867 174.216H188.429V182.943H173.343L164.355 174.216H139.454L87.6529 224.511L92.0295 228.761H98.9636V259.079H85.4286C65.187 240.279 59.8043 197.638 61.6953 165.917L62.0282 165.27H62.1911C71.0442 165.27 78.8915 169.437 83.7786 175.86L83.8282 175.929C87.5109 180.763 89.7277 186.849 89.7277 193.43C89.7277 197.968 88.6792 202.265 86.7957 206.11L86.8732 205.931C91.0023 204.885 94.5936 203.042 97.6246 200.567L97.5825 200.601C103.942 195.197 107.93 187.31 107.93 178.508C107.93 171.94 105.705 165.882 101.952 161L102.009 161.076C97.1783 154.598 89.4233 150.438 80.655 150.438C77.9212 150.438 75.2936 150.843 72.8148 151.593L72.999 151.544C74.8758 150.41 77.0359 149.406 79.3094 148.643L79.536 148.574C82.4045 147.522 85.7265 146.917 89.1898 146.917C96.8598 146.917 103.808 149.894 108.886 154.715L108.878 154.708C109.155 153.36 109.311 151.806 109.311 150.218C109.311 147.749 108.928 145.363 108.22 143.121L108.27 143.293C104.579 132.944 94.629 125.648 82.9215 125.648C79.3873 125.648 76.0161 126.315 72.921 127.525L73.0981 127.463C71.2142 128.103 69.6348 128.777 68.1262 129.547L68.3316 129.451C67.8004 127.14 67.0992 125.119 66.1997 123.2L66.2848 123.399C60.0522 109.832 45.7598 103.423 34.3358 109.027C31.1699 110.616 28.5635 112.844 26.6159 115.56L26.5734 115.629C34.9945 116.447 42.1477 121.075 46.2556 127.684L46.3193 127.793C43.8475 126.577 40.9791 125.573 37.9691 124.926L37.7283 124.884C20.1638 121.22 3.44916 130.482 0.453278 145.618C0.162897 147.034 0 148.67 0 150.334C0 153.03 0.432031 155.636 1.22526 158.078L1.17569 157.898C7.12496 151.379 15.7656 147.295 25.3907 147.295C28.1387 147.295 30.8016 147.625 33.3513 148.258L33.1247 148.21C36.0214 148.801 38.5853 149.653 40.9862 150.775L40.7808 150.686C39.6264 150.527 38.2949 150.438 36.9421 150.438C26.0988 150.438 16.6438 156.187 11.6223 164.713L11.5444 164.851C8.68312 169.486 6.99039 175.083 6.99039 181.059C6.99039 191.841 12.4935 201.372 20.9287 207.148L21.0349 207.217C24.5124 209.5 28.6627 211.081 33.1388 211.673L33.2876 211.687C30.3058 206.928 28.5352 201.179 28.5352 195.025C28.5352 189.022 30.2138 183.397 33.1459 178.576L33.0609 178.727C37.4733 171.349 44.9737 166.102 53.7913 164.644L53.9684 164.617C43.9325 208.991 41.1562 239.908 49.4356 259.072H25.3127V272H253V259.072H237.638V259.086ZM181.332 229.469H232.085V259.086H181.332V229.469ZM104.409 223.596L139.468 189.558L174.526 223.596V259.086H136.032V232.378H116.563V259.086H104.367V223.596H104.409Z"
                fill="#ED8B18"
              />
            </svg>
          </a>
        </div>

        <div className="flex items-center ms-auto order-3 h-full">
          <UserDropdown user={user} />
        </div>
      </nav>
    </header>
  );
}

export default Navbar;
