// app/login/components/LoginForm.tsx
"use client";

import Link from "next/link";
import { useSearchParams } from "next/navigation";

export default function LoginForm() {
  const searchParams = useSearchParams();
  const error = searchParams.get("error") || null;

  let errorMessage = null;
  if (error === "unauthorized") {
    errorMessage =
      "La connexion avec un mail personnel n'est pas autorisée, veuillez utiliser votre compte Google Workspace à la place.";
  }
  if (error === "invalid_claims") {
    errorMessage =
      "Une erreur lié à votre compte Google Workspace est survenue, il est possible que vous n'ayez pas les autorisations nécessaires pour accéder à cette application.";
  }
  if (error === "missing_code") {
    errorMessage =
      "Une erreur est survenue lors de la connexion. Veuillez réessayer.";
  }
  if (error === "invalid_state") {
    errorMessage =
      "Une erreur est survenue lors de la connexion. Veuillez réessayer.";
  }
  if (error === "invalid_code") {
    errorMessage =
      "Une erreur est survenue lors de la connexion. Veuillez réessayer.";
  }

  return (
    <div className="flex flex-wrap h-screen">
      <div className="w-full lg:w-1/2 p-6">
        <div className="flex flex-col justify-center py-24 max-w-md mx-auto h-full">
          <h1 className="text-3xl font-semibold font-heading mb-4">
            Connexion
          </h1>

          <p className="text-gray-800 text-xs mb-6">
            Pour accéder à votre espace&nbsp;
            <span className="font-bold">MesCongés</span>
            &nbsp;et déposer vos souhaits de congés, connectez-vous avec votre
            compte Google Workspace.
          </p>

          {errorMessage && (
            <p className="text-red-500 font-semibold text-sm mb-4">
              {errorMessage}
            </p>
          )}

          <Link
            href="/login/google"
            className="h-14 inline-flex items-center justify-center gap-2 py-4 px-6 rounded-full bg-white w-full text-center border border-gray-200/90 hover:bg-gray-50 focus:ring-8 focus:ring-[#f0f0f0] transition duration-200"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="21"
              height="20"
              viewBox="0 0 21 20"
              fill="none"
            >
              <path
                d="M10.5003 1.91667C12.5358 1.91667 14.3903 2.67493 15.8117 3.91839L13.8037 5.92643C12.9021 5.19326 11.7542 4.75001 10.5003 4.75001C7.601 4.75001 5.25033 7.10068 5.25033 10C5.25033 12.8993 7.601 15.25 10.5003 15.25C12.7863 15.25 14.7244 13.7867 15.4456 11.7501L15.5636 11.4167H15.2099H10.7503V8.58334H17.7503V8.61792H18.0003H18.4637C18.5415 9.06752 18.5837 9.52907 18.5837 10C18.5837 14.464 14.9643 18.0833 10.5003 18.0833C6.03631 18.0833 2.41699 14.464 2.41699 10C2.41699 5.53599 6.03631 1.91667 10.5003 1.91667Z"
                fill="#FFC107"
                stroke="#FFC107"
                strokeWidth="0.5"
              ></path>
              <path
                d="M3.12793 6.12125L5.86585 8.12917C6.60668 6.29501 8.40085 5.00001 10.5004 5.00001C11.775 5.00001 12.9346 5.48084 13.8175 6.26625L16.1746 3.90917C14.6863 2.52209 12.6954 1.66667 10.5004 1.66667C7.2996 1.66667 4.52376 3.47375 3.12793 6.12125Z"
                fill="#FF3D00"
              ></path>
              <path
                d="M10.4998 18.3333C12.6523 18.3333 14.6081 17.5096 16.0869 16.17L13.5077 13.9875C12.6429 14.6452 11.5862 15.0009 10.4998 15C8.3323 15 6.49189 13.6179 5.79855 11.6892L3.08105 13.7829C4.46022 16.4817 7.26105 18.3333 10.4998 18.3333Z"
                fill="#4CAF50"
              ></path>
              <path
                d="M18.6713 8.36791H18V8.33333H10.5V11.6667H15.2096C14.8809 12.5902 14.2889 13.3972 13.5067 13.9879L13.5079 13.9871L16.0871 16.1696C15.9046 16.3354 18.8333 14.1667 18.8333 9.99999C18.8333 9.44124 18.7758 8.89583 18.6713 8.36791Z"
                fill="#1976D2"
              ></path>
            </svg>
            <span className="font-semibold text-sm">
              Connexion avec Google Workspace
            </span>
          </Link>
        </div>
      </div>
      <div className="w-full lg:w-1/2 lg:block hidden">
        <div className="bg-[#f0f0f0] h-full">
          <div className="flex flex-col justify-center items-center h-full p-32">
          <svg viewBox="0 0 591 87" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M155.134 85.8929V37.7929H164.548L182.07 66.3093L175.886 66.2406L193.614 37.7929H202.615V85.8929H192.514V69.4015C192.514 65.2786 192.606 61.568 192.789 58.2697C193.018 54.9714 193.385 51.6961 193.889 48.4436L195.126 51.6732L181.039 73.5243H176.504L162.692 51.8106L163.861 48.4436C164.365 51.5128 164.708 54.6737 164.891 57.9262C165.12 61.1328 165.235 64.9579 165.235 69.4015V85.8929H155.134ZM215.125 85.8929V37.7929H247.627V46.8632H225.157V76.8226H248.108V85.8929H215.125ZM219.935 65.7596V56.9642H244.329V65.7596H219.935ZM274.341 86.58C271.363 86.58 268.637 86.2136 266.164 85.4806C263.736 84.7477 261.56 83.6711 259.636 82.251C257.758 80.8309 256.063 79.1131 254.551 77.0975L261.01 69.745C263.255 72.8601 265.476 74.9902 267.675 76.1355C269.92 77.2349 272.348 77.7846 274.959 77.7846C276.379 77.7846 277.639 77.6014 278.738 77.2349C279.884 76.8226 280.777 76.25 281.418 75.517C282.06 74.7841 282.38 73.9137 282.38 72.9059C282.38 72.1729 282.22 71.5087 281.899 70.9132C281.579 70.2718 281.12 69.7221 280.525 69.264C279.929 68.7601 279.219 68.3249 278.395 67.9585C277.57 67.5462 276.654 67.2026 275.646 66.9277C274.638 66.6071 273.539 66.3551 272.348 66.1719C269.783 65.5764 267.538 64.8663 265.614 64.0417C263.69 63.1713 262.087 62.1177 260.804 60.8809C259.521 59.5982 258.559 58.1552 257.918 56.5519C257.322 54.9485 257.024 53.1391 257.024 51.1235C257.024 49.062 257.483 47.1609 258.399 45.4202C259.315 43.6336 260.575 42.099 262.178 40.8163C263.827 39.5336 265.706 38.5487 267.813 37.8616C269.966 37.1744 272.233 36.8309 274.615 36.8309C277.547 36.8309 280.113 37.1744 282.311 37.8616C284.51 38.5029 286.411 39.442 288.015 40.6789C289.664 41.9157 291.038 43.4274 292.138 45.214L285.61 51.5357C284.648 50.2531 283.594 49.1765 282.449 48.3062C281.35 47.4358 280.136 46.7944 278.807 46.3822C277.524 45.9241 276.196 45.695 274.822 45.695C273.31 45.695 272.004 45.9012 270.905 46.3135C269.805 46.6799 268.935 47.2296 268.294 47.9626C267.698 48.6955 267.4 49.5888 267.4 50.6425C267.4 51.467 267.607 52.2 268.019 52.8413C268.431 53.4826 269.027 54.0553 269.805 54.5592C270.584 55.0173 271.523 55.4295 272.623 55.796C273.722 56.1625 274.936 56.4832 276.265 56.758C278.784 57.2619 281.052 57.9262 283.067 58.7507C285.083 59.5753 286.801 60.5831 288.221 61.7742C289.687 62.9194 290.809 64.2937 291.588 65.897C292.367 67.4545 292.756 69.2182 292.756 71.188C292.756 74.4405 291.977 77.212 290.42 79.5025C288.862 81.7929 286.709 83.5566 283.961 84.7935C281.212 85.9845 278.005 86.58 274.341 86.58ZM323.187 86.58C319.659 86.58 316.407 85.9845 313.429 84.7935C310.498 83.5566 307.932 81.8387 305.733 79.6399C303.58 77.3952 301.908 74.7612 300.717 71.7377C299.526 68.6685 298.931 65.3244 298.931 61.7055C298.931 58.1781 299.549 54.9256 300.786 51.948C302.023 48.9246 303.764 46.3134 306.008 44.1146C308.253 41.8699 310.887 40.1292 313.91 38.8923C316.934 37.6554 320.209 37.037 323.736 37.037C326.027 37.037 328.272 37.3577 330.47 37.999C332.715 38.5946 334.754 39.4878 336.586 40.6789C338.464 41.8699 340.068 43.29 341.396 44.9392L334.937 52.0855C333.837 50.986 332.692 50.0469 331.501 49.2682C330.356 48.4436 329.119 47.8252 327.791 47.4129C326.508 46.9548 325.134 46.7257 323.668 46.7257C321.698 46.7257 319.843 47.0922 318.102 47.8252C316.407 48.5581 314.918 49.5888 313.635 50.9173C312.353 52.2 311.322 53.7804 310.543 55.6586C309.81 57.491 309.444 59.5295 309.444 61.7742C309.444 64.0646 309.81 66.149 310.543 68.0272C311.276 69.8596 312.307 71.44 313.635 72.7685C314.964 74.0511 316.544 75.0589 318.377 75.7919C320.255 76.479 322.316 76.8226 324.561 76.8226C326.027 76.8226 327.447 76.6165 328.821 76.2042C330.196 75.7919 331.455 75.2193 332.601 74.4863C333.792 73.7534 334.845 72.9059 335.761 71.9439L340.778 79.9835C339.678 81.2203 338.189 82.3426 336.311 83.3505C334.479 84.3583 332.417 85.1599 330.127 85.7555C327.836 86.3052 325.523 86.58 323.187 86.58ZM370.768 86.58C367.241 86.58 363.988 85.9616 361.011 84.7248C358.033 83.4879 355.422 81.77 353.177 79.5712C350.978 77.3265 349.283 74.6925 348.092 71.669C346.901 68.5998 346.306 65.2786 346.306 61.7055C346.306 58.0865 346.901 54.7882 348.092 51.8106C349.283 48.7872 350.978 46.1531 353.177 43.9084C355.422 41.6638 358.033 39.923 361.011 38.6862C363.988 37.4493 367.241 36.8309 370.768 36.8309C374.341 36.8309 377.594 37.4493 380.525 38.6862C383.503 39.923 386.091 41.6638 388.29 43.9084C390.535 46.1531 392.253 48.7872 393.444 51.8106C394.635 54.834 395.23 58.1323 395.23 61.7055C395.23 65.2786 394.635 68.5769 393.444 71.6003C392.253 74.6238 390.535 77.2578 388.29 79.5025C386.091 81.7471 383.503 83.4879 380.525 84.7248C377.594 85.9616 374.341 86.58 370.768 86.58ZM370.768 76.8226C372.784 76.8226 374.639 76.4561 376.334 75.7232C378.075 74.9902 379.563 73.9366 380.8 72.5623C382.037 71.188 382.999 69.5847 383.686 67.7523C384.419 65.9199 384.786 63.9043 384.786 61.7055C384.786 59.5066 384.419 57.491 383.686 55.6586C382.999 53.8262 382.037 52.2458 380.8 50.9173C379.563 49.543 378.075 48.4894 376.334 47.7565C374.639 46.9777 372.784 46.5883 370.768 46.5883C368.752 46.5883 366.897 46.9777 365.202 47.7565C363.507 48.4894 362.018 49.543 360.736 50.9173C359.453 52.2458 358.468 53.8262 357.781 55.6586C357.14 57.491 356.819 59.5066 356.819 61.7055C356.819 63.9043 357.14 65.9199 357.781 67.7523C358.468 69.5847 359.453 71.188 360.736 72.5623C362.018 73.9366 363.507 74.9902 365.202 75.7232C366.897 76.4561 368.752 76.8226 370.768 76.8226ZM404.559 85.8929V37.7929H413.767L440.359 73.7305H438.435C438.252 72.3104 438.091 70.9361 437.954 69.6076L437.542 65.4847C437.45 64.0647 437.358 62.6216 437.267 61.1557C437.221 59.644 437.175 58.0636 437.129 56.4145C437.084 54.7195 437.061 52.8871 437.061 50.9173V37.7929H447.162V85.8929H437.817L410.674 49.6117L413.286 49.6804C413.515 52.0625 413.698 54.1011 413.835 55.796C414.018 57.4452 414.156 58.8882 414.247 60.125C414.339 61.3619 414.408 62.4384 414.454 63.3546C414.545 64.2708 414.591 65.1412 414.591 65.9657C414.637 66.7903 414.66 67.6607 414.66 68.5769V85.8929H404.559ZM481.708 86.58C477.998 86.58 474.585 85.9616 471.47 84.7248C468.401 83.4421 465.744 81.6784 463.499 79.4338C461.254 77.1891 459.514 74.555 458.277 71.5316C457.086 68.5082 456.49 65.2328 456.49 61.7055C456.49 58.1781 457.109 54.9256 458.345 51.948C459.628 48.9246 461.415 46.3134 463.705 44.1146C466.041 41.8699 468.767 40.1292 471.882 38.8923C474.997 37.6554 478.41 37.037 482.121 37.037C484.686 37.037 487.137 37.3806 489.473 38.0677C491.809 38.7549 493.94 39.694 495.864 40.885C497.788 42.0761 499.391 43.4504 500.673 45.0079L494.283 51.7419C493.092 50.5966 491.832 49.6346 490.504 48.8559C489.221 48.0313 487.87 47.4129 486.45 47.0006C485.03 46.5425 483.564 46.3135 482.052 46.3135C479.899 46.3135 477.906 46.7028 476.074 47.4816C474.287 48.2604 472.707 49.3369 471.332 50.7112C469.958 52.0854 468.882 53.7117 468.103 55.5899C467.37 57.4681 467.004 59.5066 467.004 61.7055C467.004 63.8585 467.393 65.897 468.172 67.821C468.996 69.6992 470.096 71.3484 471.47 72.7685C472.89 74.1427 474.539 75.2422 476.417 76.0667C478.296 76.8455 480.311 77.2349 482.464 77.2349C483.976 77.2349 485.419 77.0058 486.793 76.5477C488.168 76.0896 489.359 75.4483 490.366 74.6238C491.42 73.7534 492.222 72.7456 492.771 71.6003C493.367 70.4551 493.665 69.2411 493.665 67.9585V66.3093L495.039 68.2333H481.296V59.644H503.559C503.605 60.1479 503.651 60.7664 503.697 61.4993C503.789 62.2323 503.834 62.9652 503.834 63.6982C503.88 64.3853 503.903 64.935 503.903 65.3473C503.903 68.4624 503.33 71.3255 502.185 73.9366C501.086 76.5477 499.528 78.7924 497.513 80.6706C495.543 82.5488 493.207 84.0147 490.504 85.0683C487.801 86.0761 484.869 86.58 481.708 86.58ZM512.999 85.8929V37.7929H545.5V46.8632H523.031V76.8226H545.981V85.8929H512.999ZM517.809 65.7596V56.9642H542.202V65.7596H517.809ZM524.336 34.3572L522 29.4784L535.743 21.5763L539.316 29.0662L524.336 34.3572ZM572.213 86.58C569.235 86.58 566.509 86.2136 564.036 85.4806C561.608 84.7477 559.433 83.6711 557.509 82.251C555.631 80.8309 553.936 79.1131 552.425 77.0975L558.884 69.745C561.128 72.8601 563.348 74.9902 565.547 76.1355C567.792 77.2349 570.22 77.7846 572.831 77.7846C574.251 77.7846 575.511 77.6014 576.61 77.2349C577.755 76.8226 578.649 76.25 579.29 75.517C579.931 74.7841 580.252 73.9137 580.252 72.9059C580.252 72.1729 580.092 71.5087 579.771 70.9132C579.45 70.2718 578.992 69.7221 578.397 69.264C577.801 68.7601 577.091 68.3249 576.267 67.9585C575.442 67.5462 574.526 67.2026 573.518 66.9277C572.51 66.6071 571.411 66.3551 570.22 66.1719C567.654 65.5764 565.41 64.8663 563.486 64.0417C561.562 63.1713 559.96 62.1177 558.678 60.8809C557.395 59.5982 556.433 58.1552 555.792 56.5519C555.196 54.9485 554.898 53.1391 554.898 51.1235C554.898 49.062 555.356 47.1609 556.273 45.4202C557.189 43.6336 558.448 42.099 560.052 40.8163C561.699 39.5336 563.577 38.5487 565.685 37.8616C567.838 37.1744 570.105 36.8309 572.487 36.8309C575.419 36.8309 577.985 37.1744 580.183 37.8616C582.382 38.5029 584.283 39.442 585.887 40.6789C587.536 41.9157 588.91 43.4274 590.01 45.214L583.482 51.5357C582.52 50.2531 581.466 49.1765 580.321 48.3062C579.221 47.4358 578.007 46.7944 576.679 46.3822C575.396 45.9241 574.068 45.695 572.694 45.695C571.182 45.695 569.876 45.9012 568.777 46.3135C567.677 46.6799 566.807 47.2296 566.166 47.9626C565.57 48.6955 565.272 49.5888 565.272 50.6425C565.272 51.467 565.479 52.2 565.891 52.8413C566.303 53.4826 566.899 54.0553 567.677 54.5592C568.456 55.0173 569.395 55.4295 570.495 55.796C571.594 56.1625 572.808 56.4832 574.137 56.758C576.656 57.2619 578.924 57.9262 580.939 58.7507C582.955 59.5753 584.673 60.5831 586.093 61.7742C587.559 62.9194 588.681 64.2937 589.46 65.897C590.239 67.4545 590.628 69.2182 590.628 71.188C590.628 74.4405 589.849 77.212 588.292 79.5025C586.734 81.7929 584.581 83.5566 581.833 84.7935C579.084 85.9845 575.877 86.58 572.213 86.58ZM74.4404 62.9881H85.8928V74.4405H74.4404V62.9881ZM103.071 62.9881H114.524V74.4405H103.071V62.9881ZM97.3452 40.0776V28.631H85.8928V34.2066L90.1646 40.0834L97.3452 40.0776Z" fill="black"/>
            <path d="M123.706 79.1704V63.3879H126.157L128.436 61.2005L101.441 34.9905H98.0891V39.5331H90.2362L85.5573 34.9905H72.5944L45.6287 61.1718L47.907 63.3844H51.5168V79.167H44.471C33.934 69.3803 31.1319 47.1827 32.1163 30.6696L32.2896 30.3334H32.3744C36.983 30.3334 41.0681 32.5025 43.612 35.846L43.6378 35.8815C45.555 38.3982 46.7091 41.5665 46.7091 44.9919C46.7091 47.3545 46.1634 49.5918 45.1826 51.5931L45.2232 51.4997C47.3728 50.9557 49.2418 49.996 50.82 48.7076L50.7976 48.7254C54.1085 45.9121 56.1842 41.8059 56.1842 37.2243C56.1842 33.8058 55.0264 30.6518 53.0726 28.1105L53.1018 28.1495C50.5875 24.7779 46.5505 22.6122 41.9861 22.6122C40.563 22.6122 39.1951 22.823 37.9047 23.2135L38.0005 23.1883C38.9776 22.5979 40.1021 22.0751 41.2856 21.6777L41.4036 21.6422C42.8967 21.0942 44.6259 20.7793 46.4285 20.7793C50.4214 20.7793 54.0386 22.3294 56.6819 24.8386C56.8256 24.1365 56.9029 23.3246 56.9029 22.4977C56.9029 21.2122 56.7042 19.9702 56.3354 18.8032L56.3612 18.8925C54.4406 13.5053 49.2601 9.7077 43.1659 9.7077C41.3261 9.7077 39.5712 10.0547 37.96 10.6846L38.0522 10.6525C37.0715 10.9852 36.2493 11.3362 35.464 11.7371L35.5709 11.6872C35.2944 10.4842 34.9294 9.43168 34.4612 8.43303L34.5054 8.53668C31.261 1.47399 23.8209 -1.86208 17.874 1.05541C16.2259 1.88227 14.8691 3.04239 13.8553 4.45619L13.8332 4.49171C18.2168 4.91774 21.9406 7.32673 24.079 10.767L24.1121 10.8243C22.8254 10.1904 21.3322 9.66818 19.7653 9.33148L19.64 9.3103C10.4965 7.40233 1.7955 12.2238 0.235976 20.1025C0.0848045 20.84 0 21.692 0 22.5584C0 23.9613 0.224925 25.3184 0.637841 26.5891L0.612015 26.4958C3.70897 23.1024 8.20695 20.9763 13.2174 20.9763C14.6479 20.9763 16.0342 21.1481 17.3615 21.4773L17.2435 21.4521C18.7514 21.7602 20.086 22.204 21.3359 22.7875L21.229 22.7411C20.628 22.6586 19.9349 22.6122 19.2307 22.6122C13.5861 22.6122 8.66413 25.6047 6.05018 30.0431L6.00958 30.1147C4.52008 32.5277 3.63894 35.4412 3.63894 38.5522C3.63894 44.1651 6.50364 49.1262 10.8947 52.1336L10.95 52.1691C12.7602 53.3573 14.9208 54.1807 17.2509 54.4888L17.3283 54.4957C15.7761 52.0185 14.8544 49.026 14.8544 45.8222C14.8544 42.6974 15.7282 39.7691 17.2546 37.2598L17.2103 37.3388C19.5072 33.4977 23.4116 30.7663 28.0018 30.0076L28.094 29.9933C22.8697 53.0928 21.4244 69.1868 25.7344 79.163H13.1769V85.893H131.702V79.163H123.706V79.1704ZM94.3951 63.7526H120.815V79.1704H94.3951V63.7526ZM54.3519 60.696L72.6018 42.9769L90.8518 60.696V79.1704H70.8135V65.2672H60.6787V79.1704H54.3295V60.696H54.3519Z" fill="black"/>
          </svg>
          </div>
        </div>
      </div>
    </div>
  );
}
